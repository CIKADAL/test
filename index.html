// Recipe Data
const recipes = [
    {
        id: 1,
        title: "Classic Margherita Pizza",
        category: "dinner",
        prepTime: "20 min",
        cookTime: "15 min",
        description: "Authentic Italian pizza with fresh mozzarella, basil, and tomato sauce on a thin crust.",
        image: "https://images.pexels.com/photos/2147491/pexels-photo-2147491.jpeg?auto=compress&cs=tinysrgb&w=600",
        ingredients: [
            "1 pizza dough ball",
            "3 tbsp tomato sauce",
            "125g fresh mozzarella cheese",
            "Fresh basil leaves",
            "2 tbsp olive oil",
            "Salt and pepper to taste",
            "1 tsp dried oregano",
            "1 clove garlic, minced"
        ],
        instructions: [
            "Preheat your oven to 475°F (245°C) with a pizza stone or steel if you have one.",
            "Roll out the pizza dough on a floured surface to your desired thickness.",
            "Spread tomato sauce evenly over the dough, leaving a small border for the crust.",
            "Tear the mozzarella into pieces and distribute evenly over the sauce.",
            "Sprinkle minced garlic and oregano over the cheese.",
            "Bake for 12-15 minutes until the crust is golden and the cheese is bubbly.",
            "Remove from oven, top with fresh basil leaves, drizzle with olive oil, and season with salt and pepper.",
            "Slice and serve immediately."
        ],
        notes: "For best results, use high-quality ingredients. Fresh mozzarella makes a significant difference. If you like a crispier crust, pre-bake the dough for 3-4 minutes before adding toppings."
    },
    {
        id: 2,
        title: "Spaghetti Bolognese",
        category: "dinner",
        prepTime: "15 min",
        cookTime: "45 min",
        description: "Classic Italian pasta with rich meat sauce, perfect for family dinners and special occasions.",
        image: "https://images.pexels.com/photos/1279330/pexels-photo-1279330.jpeg?auto=compress&cs=tinysrgb&w=600",
        ingredients: [
            "400g spaghetti",
            "500g ground beef",
            "1 onion, diced",
            "2 cloves garlic, minced",
            "1 carrot, finely diced",
            "1 celery stalk, finely diced",
            "400g canned tomatoes",
            "2 tbsp tomato paste",
            "1 tsp dried oregano",
            "1 tsp dried basil",
            "Salt and pepper to taste",
            "Parmesan cheese for serving"
        ],
        instructions: [
            "Cook spaghetti according to package instructions until al dente.",
            "In a large pan, brown the ground beef over medium heat.",
            "Add onion, garlic, carrot, and celery. Cook until vegetables soften.",
            "Stir in canned tomatoes, tomato paste, and herbs. Simmer for 30 minutes.",
            "Season with salt and pepper to taste.",
            "Serve sauce over cooked spaghetti with grated Parmesan cheese."
        ],
        notes: "For a richer flavor, add a splash of red wine when cooking the sauce."
    },
    {
        id: 3,
        title: "Chocolate Chip Cookies",
        category: "dessert",
        prepTime: "15 min",
        cookTime: "10 min",
        description: "Soft and chewy cookies loaded with chocolate chips - the perfect sweet treat for any occasion.",
        image: "https://images.pexels.com/photos/230325/pexels-photo-230325.jpeg?auto=compress&cs=tinysrgb&w=600",
        ingredients: [
            "225g all-purpose flour",
            "1/2 tsp baking soda",
            "170g unsalted butter, melted",
            "150g brown sugar",
            "100g white sugar",
            "1 tbsp vanilla extract",
            "1 egg",
            "1 egg yolk",
            "200g chocolate chips"
        ],
        instructions: [
            "Preheat oven to 325°F (165°C). Line baking sheets with parchment paper.",
            "Sift together the flour and baking soda; set aside.",
            "Cream together the melted butter, brown sugar, and white sugar until well blended.",
            "Beat in the vanilla, egg, and egg yolk until light and creamy.",
            "Mix in the sifted ingredients until just blended.",
            "Stir in the chocolate chips by hand.",
            "Drop cookie dough by the tablespoon onto prepared baking sheets.",
            "Bake for 10-12 minutes, or until edges are lightly toasted.",
            "Cool on baking sheets for a few minutes before transferring to wire racks."
        ],
        notes: "For extra chewy cookies, chill the dough for at least 30 minutes before baking."
    },
    {
        id: 4,
        title: "Avocado Toast",
        category: "breakfast",
        prepTime: "5 min",
        cookTime: "5 min",
        description: "Simple, nutritious breakfast with creamy avocado on toasted artisan bread with optional toppings.",
        image: "https://images.pexels.com/photos/1030973/pexels-photo-1030973.jpeg?auto=compress&cs=tinysrgb&w=600",
        ingredients: [
            "2 slices artisan bread",
            "1 ripe avocado",
            "1 tbsp lemon juice",
            "Salt and pepper to taste",
            "Red pepper flakes (optional)",
            "2 eggs (optional)",
            "Microgreens or sprouts for garnish"
        ],
        instructions: [
            "Toast the bread until golden and crisp.",
            "Cut the avocado in half, remove the pit, and scoop the flesh into a bowl.",
            "Add lemon juice, salt, and pepper. Mash with a fork to desired consistency.",
            "Spread the avocado mixture on the toasted bread.",
            "Top with optional ingredients like poached eggs, red pepper flakes, or microgreens.",
            "Serve immediately."
        ],
        notes: "For extra flavor, drizzle with olive oil or sprinkle with everything bagel seasoning."
    },
    {
        id: 5,
        title: "Vegetable Stir Fry",
        category: "vegetarian",
        prepTime: "15 min",
        cookTime: "10 min",
        description: "Quick and healthy vegetable stir fry with a flavorful sauce, perfect for busy weeknights.",
        image: "https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&cs=tinysrgb&w=600",
        ingredients: [
            "2 tbsp vegetable oil",
            "2 cloves garlic, minced",
            "1 tbsp ginger, grated",
            "1 bell pepper, sliced",
            "1 carrot, julienned",
            "1 cup broccoli florets",
            "1 cup snap peas",
            "2 tbsp soy sauce",
            "1 tbsp oyster sauce (or vegetarian alternative)",
            "1 tsp sesame oil",
            "1 tsp cornstarch mixed with 2 tbsp water"
        ],
        instructions: [
            "Heat oil in a wok or large skillet over high heat.",
            "Add garlic and ginger, stir for 30 seconds until fragrant.",
            "Add vegetables starting with the ones that take longest to cook (carrots, broccoli).",
            "Stir fry for 5-7 minutes until vegetables are crisp-tender.",
            "Add soy sauce, oyster sauce, and sesame oil. Toss to combine.",
            "Stir in cornstarch mixture and cook until sauce thickens.",
            "Serve hot over rice or noodles."
        ],
        notes: "Customize with your favorite vegetables. Add tofu or tempeh for extra protein."
    },
    {
        id: 6,
        title: "Berry Smoothie Bowl",
        category: "breakfast",
        prepTime: "10 min",
        cookTime: "0 min",
        description: "Refreshing and nutritious smoothie bowl topped with fresh fruits and crunchy granola.",
        image: "https://images.pexels.com/photos/103124/pexels-photo-103124.jpeg?auto=compress&cs=tinysrgb&w=600",
        ingredients: [
            "1 frozen banana",
            "1 cup mixed frozen berries",
            "1/2 cup almond milk",
            "1 tbsp honey or maple syrup",
            "1/2 tsp vanilla extract",
            "Toppings: fresh berries, granola, chia seeds, coconut flakes"
        ],
        instructions: [
            "In a blender, combine frozen banana, mixed berries, almond milk, honey, and vanilla.",
            "Blend until smooth and creamy, adding more liquid if needed.",
            "Pour into a bowl and top with your favorite toppings.",
            "Serve immediately with a spoon."
        ],
        notes: "For a thicker consistency, use less liquid. For extra protein, add a scoop of protein powder or Greek yogurt."
    },
    {
        id: 7,
        title: "Stuffed Mushrooms",
        category: "appetizer",
        prepTime: "15 min",
        cookTime: "20 min",
        description: "Creamy cheese and herb stuffed mushrooms - the perfect bite-sized appetizer for any gathering.",
        image: "https://images.pexels.com/photos/2097090/pexels-photo-2097090.jpeg?auto=compress&cs=tinysrgb&w=600",
        ingredients: [
            "20 large white mushrooms",
            "2 tbsp olive oil",
            "2 cloves garlic, minced",
            "1/4 cup breadcrumbs",
            "4 oz cream cheese, softened",
            "1/4 cup grated Parmesan",
            "1 tbsp fresh parsley, chopped",
            "Salt and pepper to taste"
        ],
        instructions: [
            "Preheat oven to 375°F (190°C). Line a baking sheet with parchment paper.",
            "Clean mushrooms and remove stems. Chop stems finely.",
            "Heat oil in a pan over medium heat. Add garlic and chopped mushroom stems. Cook until soft.",
            "In a bowl, combine cooked stems, breadcrumbs, cream cheese, Parmesan, parsley, salt and pepper.",
            "Fill each mushroom cap with the mixture, mounding slightly.",
            "Bake for 18-20 minutes until mushrooms are tender and filling is golden.",
            "Serve warm."
        ],
        notes: "For a vegetarian version, ensure the Parmesan is vegetarian. Add cooked sausage or bacon to the filling for extra flavor."
    },
    {
        id: 8,
        title: "Chicken Salad",
        category: "lunch",
        prepTime: "20 min",
        cookTime: "0 min",
        description: "Fresh and flavorful chicken salad with crisp vegetables and tangy dressing.",
        image: "https://images.pexels.com/photos/2092897/pexels-photo-2092897.jpeg?auto=compress&cs=tinysrgb&w=600",
        ingredients: [
            "2 cups cooked chicken, shredded",
            "1/2 cup mayonnaise",
            "1 tbsp Dijon mustard",
            "1 tbsp lemon juice",
            "1 celery stalk, diced",
            "1/4 cup red onion, finely diced",
            "1/4 cup grapes, halved",
            "1/4 cup walnuts, chopped",
            "Salt and pepper to taste",
            "Lettuce leaves for serving"
        ],
        instructions: [
            "In a large bowl, combine mayonnaise, mustard, and lemon juice.",
            "Add chicken, celery, red onion, grapes, and walnuts. Mix well.",
            "Season with salt and pepper to taste.",
            "Chill for at least 30 minutes before serving.",
            "Serve on lettuce leaves or as a sandwich filling."
        ],
        notes: "For a lighter version, substitute half the mayonnaise with Greek yogurt."
    }
];

// Additional recipes
const additionalRecipes = [
    {
        id: 9,
        title: "Vegetable Lasagna",
        category: "dinner",
        prepTime: "25 min",
        cookTime: "45 min",
        description: "Hearty vegetable lasagna with layers of pasta, cheese, and fresh vegetables.",
        image: "https://images.pexels.com/photos/4079520/pexels-photo-4079520.jpeg?auto=compress&cs=tinysrgb&w=600",
        ingredients: [
            "9 lasagna noodles",
            "2 cups ricotta cheese",
            "1 egg",
            "1/4 cup grated Parmesan",
            "2 cups shredded mozzarella",
            "2 cups marinara sauce",
            "2 cups mixed vegetables (zucchini, spinach, mushrooms)",
            "1 tsp Italian seasoning",
            "Salt and pepper to taste"
        ],
        instructions: [
            "Preheat oven to 375°F (190°C). Cook lasagna noodles according to package.",
            "In a bowl, mix ricotta, egg, Parmesan, and Italian seasoning.",
            "In a 9x13 dish, spread a thin layer of marinara sauce.",
            "Layer 3 noodles, half the ricotta mixture, half the vegetables, and 1/3 of the mozzarella.",
            "Repeat layers, ending with noodles, sauce, and remaining mozzarella.",
            "Cover with foil and bake for 30 minutes. Remove foil and bake 15 more minutes.",
            "Let stand 10 minutes before serving."
        ],
        notes: "Can be made ahead and refrigerated overnight before baking."
    },
    {
        id: 10,
        title: "French Toast",
        category: "breakfast",
        prepTime: "10 min",
        cookTime: "15 min",
        description: "Classic French toast with cinnamon and vanilla, served with maple syrup.",
        image: "https://images.pexels.com/photos/376464/pexels-photo-376464.jpeg?auto=compress&cs=tinysrgb&w=600",
        ingredients: [
            "8 slices thick bread",
            "4 eggs",
            "1 cup milk",
            "1 tsp vanilla extract",
            "1 tsp ground cinnamon",
            "2 tbsp butter",
            "Maple syrup for serving",
            "Powdered sugar (optional)"
        ],
        instructions: [
            "In a shallow dish, whisk together eggs, milk, vanilla, and cinnamon.",
            "Heat a griddle or large skillet over medium heat. Add butter.",
            "Dip bread slices in egg mixture, allowing to soak for a few seconds on each side.",
            "Cook on griddle until golden brown, about 3-4 minutes per side.",
            "Serve warm with maple syrup and powdered sugar if desired."
        ],
        notes: "For best results, use slightly stale bread. Challah or brioche work particularly well."
    },
    {
        id: 11,
        title: "Chocolate Mousse",
        category: "dessert",
        prepTime: "20 min",
        cookTime: "0 min",
        description: "Rich and creamy chocolate mousse topped with fresh berries.",
        image: "https://images.pexels.com/photos/302478/pexels-photo-302478.jpeg?auto=compress&cs=tinysrgb&w=600",
        ingredients: [
            "200g dark chocolate, chopped",
            "3 eggs, separated",
            "1 tbsp sugar",
            "1/2 cup heavy cream",
            "1 tsp vanilla extract",
            "Pinch of salt",
            "Fresh berries for garnish"
        ],
        instructions: [
            "Melt chocolate in a heatproof bowl over simmering water. Let cool slightly.",
            "Whisk egg yolks into the melted chocolate one at a time.",
            "In another bowl, whip cream to soft peaks. Fold into chocolate mixture.",
            "In a clean bowl, beat egg whites with salt until foamy. Add sugar and beat to stiff peaks.",
            "Gently fold egg whites into chocolate mixture in two additions.",
            "Divide into serving dishes and chill for at least 4 hours.",
            "Garnish with fresh berries before serving."
        ],
        notes: "For best results, use high-quality chocolate with at least 60% cocoa content."
    },
    {
        id: 12,
        title: "Caprese Salad",
        category: "appetizer",
        prepTime: "10 min",
        cookTime: "0 min",
        description: "Fresh mozzarella, tomatoes, and basil drizzled with balsamic glaze.",
        image: "https://images.pexels.com/photos/1211887/pexels-photo-1211887.jpeg?auto=compress&cs=tinysrgb&w=600",
        ingredients: [
            "2 large tomatoes, sliced",
            "200g fresh mozzarella, sliced",
            "Fresh basil leaves",
            "2 tbsp extra virgin olive oil",
            "1 tbsp balsamic glaze",
            "Salt and pepper to taste"
        ],
        instructions: [
            "Arrange tomato and mozzarella slices alternately on a platter.",
            "Tuck fresh basil leaves between the slices.",
            "Drizzle with olive oil and balsamic glaze.",
            "Season with salt and pepper to taste.",
            "Serve immediately."
        ],
        notes: "For best flavor, use ripe, in-season tomatoes and high-quality mozzarella."
    }
];

// DOM Elements
const recipesGrid = document.querySelector('.recipes-grid');
const additionalRecipesGrid = document.getElementById('additional-recipes');
const recipeModal = document.getElementById('recipeModal');
const modalBody = document.querySelector('#recipeModal .modal-body');
const closeModal = document.querySelector('#recipeModal .close-modal');
const viewButtons = document.querySelectorAll('.view-recipe');
const categoryTabs = document.querySelectorAll('.category-tab');
const adminBtn = document.querySelector('.admin-btn');
const adminLoginModal = document.getElementById('adminLoginModal');
const closeAdminModal = document.getElementById('closeAdminModal');
const adminLoginForm = document.getElementById('adminLoginForm');
const adminPassword = document.getElementById('adminPassword');
const errorMessage = document.getElementById('errorMessage');
const passwordToggle = document.getElementById('passwordToggle');
const recipeManagementModal = document.getElementById('recipeManagementModal');
const closeManagementModal = document.getElementById('closeManagementModal');
const logoutBtn = document.getElementById('logoutBtn');
const addRecipeBtn = document.getElementById('addRecipeBtn');
const manageCategoriesBtn = document.getElementById('manageCategoriesBtn');
const viewAnalyticsBtn = document.getElementById('viewAnalyticsBtn');
const recipeTable = document.getElementById('recipeTable').querySelector('tbody');

// Initialize the page
document.addEventListener('DOMContentLoaded', () => {
    loadRecipes();
    loadAdditionalRecipes();
    loadRecipeTable();
});

// Load recipes into the grid
function loadRecipes() {
    recipesGrid.innerHTML = '';
    recipes.forEach(recipe => {
        const recipeCard = createRecipeCard(recipe);
        recipesGrid.appendChild(recipeCard);
    });
}

// Load additional recipes
function loadAdditionalRecipes() {
    additionalRecipesGrid.innerHTML = '';
    additionalRecipes.forEach(recipe => {
        const recipeCard = createRecipeCard(recipe);
        additionalRecipesGrid.appendChild(recipeCard);
    });
}

// Create recipe card HTML
function createRecipeCard(recipe) {
    const recipeCard = document.createElement('div');
    recipeCard.className = 'recipe-card';
    recipeCard.dataset.category = recipe.category;
    recipeCard.dataset.id = recipe.id;
    
    recipeCard.innerHTML = `
        <div class="recipe-img">
            <img src="${recipe.image}" alt="${recipe.title}">
            <div class="recipe-category">${recipe.category.charAt(0).toUpperCase() + recipe.category.slice(1)}</div>
        </div>
        <div class="recipe-content">
            <h3>${recipe.title}</h3>
            <p>${recipe.description}</p>
            <div class="recipe-meta">
                <div class="meta-item">
                    <i class="fas fa-clock meta-icon"></i>
                    <span>${recipe.prepTime} prep</span>
                </div>
                <div class="meta-item">
                    <i class="fas fa-fire meta-icon"></i>
                    <span>${recipe.cookTime} cook</span>
                </div>
            </div>
            <button class="view-recipe" data-id="${recipe.id}">View Recipe</button>
        </div>
    `;
    
    return recipeCard;
}

// Load recipe details into modal
function loadRecipeModal(recipeId) {
    const allRecipes = [...recipes, ...additionalRecipes];
    const recipe = allRecipes.find(r => r.id === recipeId);
    
    if (!recipe) return;
    
    modalBody.innerHTML = `
        <div class="modal-header">
            <h3 class="heading">${recipe.title}</h3>
            <span class="modal-category">${recipe.category.charAt(0).toUpperCase() + recipe.category.slice(1)}</span>
        </div>
        
        <p class="modal-description">
            ${recipe.description}
        </p>
        
        <div class="modal-meta">
            <div>
                <i class="fas fa-clock"></i>
                <span>Prep Time: ${recipe.prepTime}</span>
            </div>
            <div>
                <i class="fas fa-fire"></i>
                <span>Cook Time: ${recipe.cookTime}</span>
            </div>
            <div>
                <i class="fas fa-user-friends"></i>
                <span>Servings: ${recipe.servings || '2-4 people'}</span>
            </div>
        </div>
        
        <div class="modal-section">
            <h4>Ingredients</h4>
            <ul class="ingredients-list">
                ${recipe.ingredients.map(ing => `<li>${ing}</li>`).join('')}
            </ul>
        </div>
        
        <div class="modal-section">
            <h4>Instructions</h4>
            <ol class="instructions-list">
                ${recipe.instructions.map(inst => `<li>${inst}</li>`).join('')}
            </ol>
        </div>
        
        ${recipe.notes ? `
        <div class="modal-section">
            <h4>Notes</h4>
            <p>${recipe.notes}</p>
        </div>
        ` : ''}
    `;
    
    recipeModal.classList.add('active');
    document.body.style.overflow = 'hidden';
}

// Load recipe table for admin
function loadRecipeTable() {
    recipeTable.innerHTML = '';
    const allRecipes = [...recipes, ...additionalRecipes];
    
    allRecipes.forEach(recipe => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${recipe.title}</td>
            <td>${recipe.category.charAt(0).toUpperCase() + recipe.category.slice(1)}</td>
            <td>${recipe.prepTime}</td>
            <td>${recipe.cookTime}</td>
            <td>
                <button class="action-btn edit-btn" data-id="${recipe.id}">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="action-btn delete-btn" data-id="${recipe.id}">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        `;
        recipeTable.appendChild(row);
    });
}

// Filter recipes by category
function filterRecipes(category) {
    const allRecipeCards = document.querySelectorAll('.recipe-card');
    let hasVisibleRecipes = false;
    
    allRecipeCards.forEach(card => {
        if (category === 'all' || card.dataset.category === category) {
            card.style.display = 'flex';
            hasVisibleRecipes = true;
        } else {
            card.style.display = 'none';
        }
    });
    
    // Show/hide "no recipes" message
    const noRecipesMessage = document.querySelector('.no-recipes-message');
    if (!hasVisibleRecipes) {
        if (!noRecipesMessage) {
            const message = document.createElement('div');
            message.className = 'no-recipes-message';
            message.innerHTML = `
                <i class="fas fa-utensils"></i>
                <h3>No recipes found in this category</h3>
                <p>Try selecting another category or check back later for new recipes!</p>
            `;
            recipesGrid.appendChild(message);
        }
    } else {
        if (noRecipesMessage) {
            noRecipesMessage.remove();
        }
    }
}

// Show message function
function showMessage(message, type) {
    const messageEl = document.createElement('div');
    messageEl.textContent = message;
    messageEl.style.position = 'fixed';
    messageEl.style.top = '20px';
    messageEl.style.right = '20px';
    messageEl.style.padding = '15px 25px';
    messageEl.style.borderRadius = '8px';
    messageEl.style.color = 'white';
    messageEl.style.zIndex = '2000';
    messageEl.style.boxShadow = '0 5px 15px rgba(0,0,0,0.2)';
    messageEl.style.opacity = '0';
    messageEl.style.transform = 'translateY(-20px)';
    messageEl.style.transition = 'all 0.3s ease';
    
    if (type === 'success') {
        messageEl.style.background = '#2ecc71';
    } else {
        messageEl.style.background = '#e74c3c';
    }
    
    document.body.appendChild(messageEl);
    
    // Animate in
    setTimeout(() => {
        messageEl.style.opacity = '1';
        messageEl.style.transform = 'translateY(0)';
    }, 10);
    
    // Remove after delay
    setTimeout(() => {
        messageEl.style.opacity = '0';
        messageEl.style.transform = 'translateY(-20px)';
        setTimeout(() => {
            document.body.removeChild(messageEl);
        }, 300);
    }, 3000);
}

// Event Listeners

// View recipe buttons
document.addEventListener('click', (e) => {
    if (e.target.classList.contains('view-recipe')) {
        const recipeId = parseInt(e.target.dataset.id);
        loadRecipeModal(recipeId);
    }
});

// Close recipe modal
closeModal.addEventListener('click', () => {
    recipeModal.classList.remove('active');
    document.body.style.overflow = '';
});

// Category tabs
categoryTabs.forEach(tab => {
    tab.addEventListener('click', () => {
        // Remove active class from all tabs
        categoryTabs.forEach(t => t.classList.remove('active'));
        
        // Add active class to clicked tab
        tab.classList.add('active');
        
        // Filter recipes
        filterRecipes(tab.dataset.category);
    });
});

// Admin login button
adminBtn.addEventListener('click', () => {
    adminLoginModal.classList.add('active');
    document.body.style.overflow = 'hidden';
    adminPassword.focus();
});

// Close admin login modal
closeAdminModal.addEventListener('click', () => {
    adminLoginModal.classList.remove('active');
    document.body.style.overflow = '';
    resetForm();
});

// Close recipe management modal
closeManagementModal.addEventListener('click', () => {
    recipeManagementModal.classList.remove('active');
    document.body.style.overflow = '';
});

// Logout functionality
logoutBtn.addEventListener('click', () => {
    recipeManagementModal.classList.remove('active');
    showMessage('Successfully logged out', 'success');
});

// Toggle password visibility
passwordToggle.addEventListener('click', () => {
    const type = adminPassword.getAttribute('type') === 'password' ? 'text' : 'password';
    adminPassword.setAttribute('type', type);
    passwordToggle.innerHTML = type === 'password' ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
});

// Handle admin login form submission
adminLoginForm.addEventListener('submit', (e) => {
    e.preventDefault();
    
    // Correct password
    const correctPassword = "8200@8200@";
    
    if (adminPassword.value === correctPassword) {
        // Close login modal
        adminLoginModal.classList.remove('active');
        
        // Show success message
        showMessage('Login successful! Redirecting to recipe management...', 'success');
        
        // After a short delay, show recipe management
        setTimeout(() => {
            recipeManagementModal.classList.add('active');
            resetForm();
        }, 1500);
    } else {
        // Show error
        errorMessage.style.display = 'block';
        adminPassword.style.borderColor = '#e74c3c';
        
        // Shake animation for error feedback
        adminLoginForm.classList.add('shake');
        setTimeout(() => {
            adminLoginForm.classList.remove('shake');
        }, 500);
    }
});

// Add recipe button
addRecipeBtn.addEventListener('click', () => {
    showMessage('Add new recipe form would open here', 'success');
});

// Manage categories button
manageCategoriesBtn.addEventListener('click', () => {
    showMessage('Category management interface would open here', 'success');
});

// View analytics button
viewAnalyticsBtn.addEventListener('click', () => {
    showMessage('Analytics dashboard would open here', 'success');
});

// Edit and delete buttons in recipe table
recipeTable.addEventListener('click', (e) => {
    if (e.target.classList.contains('edit-btn') || e.target.closest('.edit-btn')) {
        const btn = e.target.classList.contains('edit-btn') ? e.target : e.target.closest('.edit-btn');
        const recipeId = parseInt(btn.dataset.id);
        showMessage(`Edit recipe with ID: ${recipeId}`, 'success');
    }
    
    if (e.target.classList.contains('delete-btn') || e.target.closest('.delete-btn')) {
        const btn = e.target.classList.contains('delete-btn') ? e.target : e.target.closest('.delete-btn');
        const recipeId = parseInt(btn.dataset.id);
        showMessage(`Delete recipe with ID: ${recipeId} (confirmation dialog would appear)`, 'success');
    }
});

// Close modals when clicking outside
window.addEventListener('click', (e) => {
    if (e.target === recipeModal) {
        recipeModal.classList.remove('active');
        document.body.style.overflow = '';
    }
    if (e.target === adminLoginModal) {
        adminLoginModal.classList.remove('active');
        document.body.style.overflow = '';
        resetForm();
    }
    if (e.target === recipeManagementModal) {
        recipeManagementModal.classList.remove('active');
        document.body.style.overflow = '';
    }
});

// Reset form function
function resetForm() {
    adminLoginForm.reset();
    errorMessage.style.display = 'none';
    adminPassword.style.borderColor = '#e0e0e0';
    adminPassword.setAttribute('type', 'password');
    passwordToggle.innerHTML = '<i class="fas fa-eye"></i>';
}

// Initialize with all recipes
filterRecipes('all');
